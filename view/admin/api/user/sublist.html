<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="/static/component/pear/css/pear.css" />
    <script src="/static/component/layui/layui.js"></script>
    <script src="/static/component/pear/pear.js"></script>
    <style>
    .layui-table-cell{
        height: auto;
        overflow: visible;
        width: 300px;
        white-space: break-spaces;
    }
    </style>
</head>
	<body class="pear-container">
	<div class="layui-card">
		<div class="layui-card-body">
			<form class="layui-form" action="">
				<div class="layui-form-item">
					<label class="layui-form-label">手机号</label>
					<div class="layui-input-inline">
						<input type="text" name="mobile" placeholder="请输入手机号" class="layui-input">
					</div>
					
					<div class="layui-form-item layui-inline">
						<button class="pear-btn pear-btn-md pear-btn-primary" lay-submit lay-filter="query">
							<i class="layui-icon layui-icon-search"></i>
							查询
						</button>
						<button type="reset" class="pear-btn pear-btn-md">
							<i class="layui-icon layui-icon-refresh"></i>
							重置
						</button>
					</div>
					
					<!--描述-->
                    <div style="margin-left:52px;">
                        <p>
                            页面描述：
                        </p>
                        <div style="margin-left:50px;">
                            <p>
                                查一下号码他线下多少注册、实名、购买的全部显示，然后在级别那显示出是几级
                            </p>
                            
                        </div>
                    </div>
                    
                    
				</div>
			</form>
		</div>
	</div>
		<div class="layui-card">
			<div class="layui-card-body">
				<table id="dataTable" lay-filter="dataTable"></table>
			</div>
		</div>

		<script type="text/html" id="toolbar">
			
  		</script>

		<script type="text/html" id="options">
			
		</script>
        <script>
        layui.use(['table', 'form', 'jquery','common','laydate'], function() {
            let table = layui.table;
            let form = layui.form;
            let $ = layui.jquery;
            let common = layui.common;
            let laydate = layui.laydate;
            let MODULE_PATH = "{$Request.root}/api.user/";
            
            laydate.render({
                elem: '#range'
                ,type: 'datetime'
                , range: '~'
                , eventElem: '.laydate-ico'
                , trigger: 'click'
            });
            
            let cols = [
                [ 
                    {
                       field: "id",
                       title: "ID",
                       unresize: "true",
                       align: "center",
                       width: 80,
                   }, {
                       field: "mobile",
                       title: "手机号",
                       unresize: "true",
                       align: "center",
                       width:110,
                   }, {
                       field: "parent_user_mobile",
                       title: "代理账户",
                       unresize: "true",
                       align: "center",
                       width:110,
                   },{
                       field: "username",
                       title: "用户真实姓名",
                       unresize: "true",
                       align: "center",
                       width:110,
                   },{
                       field: "recharge",
                       title: "充值",
                       unresize: "true",
                       align: "center",
                       width:110,
                   },{
                       field: "withdrawal",
                       title: "提现",
                       unresize: "true",
                       align: "center",
                       width:110,
                   },{
                       field: "price",
                       title: "余额",
                       unresize: "true",
                       align: "center",
                       width:110,
                   },{
                       field: "level",
                       title: "层级",
                       unresize: "true",
                       align: "center",
                       width:110,
                   }
                ]
            ]

            var url = "sublist?mobile=";
            table.render({
                elem: '#dataTable',
                url: MODULE_PATH + url,
                page: true,
                cols: cols,
                cellMinWidth: 100,
                skin: 'line',
                toolbar: '#toolbar',
                defaultToolbar: [{
                    title: '刷新',
                    layEvent: 'refresh',
                    icon: 'layui-icon-refresh',
                }, 'filter', 'print', 'exports']
            });
            
            form.on('submit(query)', function(data) {
                table.reload('dataTable', {
                    where: data.field,
                    page:{curr: 1}
                })
                
                return false;
            });

            window.refresh = function(param) {
                table.reload('dataTable');
            }
        })
    </script>
	</body>
</html>
